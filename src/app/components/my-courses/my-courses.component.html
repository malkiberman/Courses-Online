<div class="my-courses-container">
  <h1>הקורסים שלי</h1>
  <mat-accordion>
    @for (course of courses; track course.id) {
    <mat-expansion-panel (opened)="showCourseDetails(course.id)" (closed)="course.isDetailsOpen = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ course.title }}
        </mat-panel-title>
        <mat-panel-description>
          לחץ כאן כדי {{ course.isDetailsOpen ? 'לסגור פרטים' : 'לראות פרטים' }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-card-content>
        @if (selectedCourse && selectedCourse.id === course.id) {
        <p>{{ selectedCourse.description }}</p>
        <h3>שיעורים</h3>
        <mat-list>
          @for (lesson of lessons; track lesson.id) {
          <mat-list-item>
            <h4>{{ lesson.title }}</h4>
            <p>{{ lesson.content }}</p>
          </mat-list-item>
          } @empty {
          <p>אין שיעורים בקורס זה.</p>
          }
        </mat-list>
        }
        <button mat-button (click)="joinCourse(course.id)">הצטרף לקורס</button>
      </mat-card-content>
    </mat-expansion-panel>
    } @empty {
    <p>אין קורסים זמינים כרגע.</p>
    }
  </mat-accordion>
</div>